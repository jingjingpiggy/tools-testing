#!/bin/sh -eu

repo="$1"
package="$2"

if [ -e /usr/bin/apt-get -a -d /etc/apt/sources.list.d/ ] ; then
   ubuntu_release=$(grep DISTRIB_RELEASE /etc/lsb-release | cut -f2 -d=)
   srclist="/etc/apt/sources.list.d/Tools.list"
   echo "deb http://download.otctools.jf.intel.com/home:/tester:/Tools/xUbuntu_$ubuntu_release/ /" > $srclist
   echo "deb http://download.otctools.jf.intel.com/home:/tester:/$repo/xUbuntu_$ubuntu_release/ /" >>  $srclist
   apt-get update
   apt-get upgrade -y
   apt-get install -y --force-yes $package
elif [ -e /usr/bin/zypper -a -d /etc/zypp/repos.d ] ; then
   zypper ar -fG http://download.otctools.jf.intel.com/home%3A/tester%3A/Tools/openSUSE12.1/ Tools
   zypper ar -fG http://download.otctools.jf.intel.com/home%3A/tester%3A/$repo/openSUSE12.1/ $repo
   sed -ie 's/%25/%/g' /etc/zypp/repos.d/*.repo
   zypper --non-interactive ref
   zypper --non-interactive install $package
fi
