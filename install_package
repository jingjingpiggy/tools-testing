#!/bin/sh -efu

package="$1"
build="$2"
log="$3"

if [ -e /usr/bin/apt-get -a -d /etc/apt/sources.list.d/ ] ; then
   ubuntu_release=$(grep DISTRIB_RELEASE /etc/lsb-release | cut -f2 -d=)
   echo "deb http://download.otctools.jf.intel.com/Tools:/Devel/xUbuntu_\$ubuntu_release/ /" > /etc/apt/sources.list.d/tools.list
   #echo "deb http://download.otctools.jf.intel.com/home:/tester:/Tools-$package-$build/xUbuntu_\$ubuntu_release/ /" >>  /etc/apt/sources.list.d/tools.list
   apt-get update | tee $log
   apt-get upgrade | tee -a $log
   apt-get install -y --force-yes $PACKAGE | tee -a $log
elif [ -e /usr/bin/zypper -a -d /etc/zypp/repos.d ] ; then
   zypper ar -fG http://download.otctools.jf.intel.com/Tools:/Devel/openSUSE12.1/ Tools
   #zypper ar -fG http://download.otctools.jf.intel.com/home:/tester:/Tools-$package-$build/openSUSE12.1/ Tools-$package-$build
   zypper ref | tee $log
   zypper --non-interactive install $package | tee -a $LOG
fi
